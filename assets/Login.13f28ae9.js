import{L as u}from"./Loader.75b2a626.js";import{r as i,o,c as l,a as e,w as f,b as m,v as n,d as y,e as c,f as x,g as b}from"./index.8958f7fb.js";import{_ as k}from"./logo_long.ac4ca37f.js";import{_ as w}from"./_plugin-vue_export-helper.cdc0426e.js";const h={name:"Login",components:{Loader:u},data(){return{searchingForMeterNo:!1,form:new Form({email:"",password:""}),meterName:"",meterValue:""}},computed:{},methods:{async login(){try{let t=await this.form.post("/login"),r=t.data.message;console.log(t.data),this.$store.commit("login",{user:t.data.data.user,token:t.data.data.token}),localStorage.setItem("xfiles_grpzi",t.data.data.token),localStorage.setItem("xfiles_grpzi_user",JSON.stringify(t.data.data.user)),fncs.bootAxios(),toast.success(r),this.$router.push({name:"dashboard"})}catch(t){let r="";t.response.data.message&&(r=`
`+t.response.data.message),toast.error(t.message+r)}}},mounted(){},created(){fncs.user()&&this.$router.push({name:"dashboard"})}},v={class:"bg-gray-50 dark:bg-gray-900"},_={class:"flex flex-col items-center justify-center px-6 pt-8 mx-auto md:h-screen pt:mt-0 dark:bg-gray-900"},S={class:"w-full max-w-xl p-6 space-y-8 sm:p-8 bg-white rounded-lg shadow dark:bg-gray-800"},L={class:"flex items-start"},M={key:1,type:"submit",class:"w-full px-5 py-3 text-base font-medium text-center text-white bg-primary-700 rounded-lg hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 sm:w-auto dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"};function N(t,r,V,B,a,d){const p=i("router-link"),g=i("loader");return o(),l("main",v,[e("div",_,[e("div",S,[r[9]||(r[9]=e("a",{href:"#",class:"flex items-center justify-center mb-2 text-2xl font-semibold lg:mb-10 dark:text-white"},[e("img",{src:k,class:"mr-4 h-20",alt:"ECMS Preview Logo"})],-1)),r[10]||(r[10]=e("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Sign in to ECMS Preview ",-1)),e("form",{class:"mt-8 space-y-6",action:"#",onSubmit:r[2]||(r[2]=f((...s)=>d.login&&d.login(...s),["prevent"]))},[e("div",null,[r[3]||(r[3]=e("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Email",-1)),m(e("input",{"onUpdate:modelValue":r[0]||(r[0]=s=>a.form.email=s),type:"email",name:"email",id:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"name@company.com",required:""},null,512),[[n,a.form.email]])]),e("div",null,[r[4]||(r[4]=e("label",{for:"password",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Password",-1)),m(e("input",{"onUpdate:modelValue":r[1]||(r[1]=s=>a.form.password=s),type:"password",name:"password",id:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",required:""},null,512),[[n,a.form.password]])]),e("div",L,[r[6]||(r[6]=e("div",{class:"flex items-center h-2"},null,-1)),r[7]||(r[7]=e("div",{class:"ml-3 text-sm"},null,-1)),y(p,{to:{name:"update_password"},class:"ml-auto text-sm text-primary-700 hover:underline dark:text-primary-500"},{default:c(()=>r[5]||(r[5]=[b("Update Password?")])),_:1})]),a.form.busy?(o(),x(g,{key:0})):(o(),l("button",M,"Login to your account")),r[8]||(r[8]=e("div",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},null,-1))],32)])])])}const j=w(h,[["render",N]]);export{j as default};
