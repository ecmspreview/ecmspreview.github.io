import{L as f}from"./Loader.75b2a626.js";import{r as u,o as t,c as i,a as e,f as g,w as y,b as m,v as n,d as w,e as b,g as k}from"./index.8958f7fb.js";import{_ as x}from"./_plugin-vue_export-helper.cdc0426e.js";const h={name:"ResetPassword",components:{Loader:f},data(){return{pageLoaded:!1,form:new Form({code:"",email:"",password:"",password_confirmation:""})}},computed:{},methods:{async confirmResetPassword(s){try{let r=await axios.post("/confirm-reset-password",{code:s});this.pageLoaded=!0,this.form.email=r.data.data.email,this.form.code=s}catch(r){let d="";r.response.data.message&&(d=`
`+r.response.data.message+`
Redirecting to Login Page`),toast.error(r.message+d),setTimeout(()=>{this.$router.push({name:"login"})},1500)}},async changePassword(){try{let s=await this.form.post("/update-password"),r=s.data.message;console.log(s.data),toast.success(r),setTimeout(()=>{this.$router.push({name:"login"})},1500)}catch(s){let r="";s.response.data.message&&(r=`
`+s.response.data.message),toast.error(s.message+r)}}},mounted(){},created(){fncs.user()&&this.$router.push({name:"dashboard"}),this.$route.query.code=="undefined"||!this.$route.query.code?(toast.warning(`Error in Reset Password
Redirecting to Login Page`),setTimeout(()=>{this.$router.push({name:"login"})},1500)):this.confirmResetPassword(this.$route.query.code)}},v={class:"bg-gray-50 dark:bg-gray-900"},P={class:"flex flex-col items-center justify-center px-6 pt-8 mx-auto md:h-screen pt:mt-0 dark:bg-gray-900"},R={class:"w-full max-w-xl p-6 space-y-8 bg-white rounded-lg shadow sm:p-8 dark:bg-gray-800"},L={key:1,type:"submit",class:"w-full px-5 py-3 text-base font-medium text-center text-white rounded-lg bg-primary-700 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 sm:w-auto dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"};function _(s,r,d,q,o,l){const p=u("loader"),c=u("router-link");return t(),i("div",null,[e("main",v,[e("div",P,[e("div",R,[r[8]||(r[8]=e("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Reset your password ",-1)),o.pageLoaded?(t(),i("form",{key:1,class:"mt-8 space-y-6",action:"#",onSubmit:r[3]||(r[3]=y((...a)=>l.changePassword&&l.changePassword(...a),["prevent"]))},[e("div",null,[r[4]||(r[4]=e("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Your email",-1)),m(e("input",{"onUpdate:modelValue":r[0]||(r[0]=a=>o.form.email=a),type:"email",name:"email",id:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"name@company.com",disabled:"",required:""},null,512),[[n,o.form.email]])]),e("div",null,[r[5]||(r[5]=e("label",{for:"password",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"New password",-1)),m(e("input",{"onUpdate:modelValue":r[1]||(r[1]=a=>o.form.password=a),type:"password",name:"password",id:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",required:""},null,512),[[n,o.form.password]])]),e("div",null,[r[6]||(r[6]=e("label",{for:"confirm-password",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Confirm New Password",-1)),m(e("input",{"onUpdate:modelValue":r[2]||(r[2]=a=>o.form.password_confirmation=a),type:"password",name:"confirm-password",id:"confirm-password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",required:""},null,512),[[n,o.form.password_confirmation]])]),o.form.busy?(t(),g(p,{key:0})):(t(),i("button",L,"Reset password"))],32)):(t(),g(p,{key:0})),w(c,{to:{name:"login"},class:"ml-auto mt-2 text-sm text-primary-700 hover:underline dark:text-primary-500"},{default:b(()=>r[7]||(r[7]=[k("Login Page")])),_:1})])])])])}const B=x(h,[["render",_]]);export{B as default};
